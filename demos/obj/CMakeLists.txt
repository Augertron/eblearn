################################################################################
#
# CMake configuration for the objrec demo project
#
# Author(s):
#   Pierre Sermanet, pierre.sermanet@gmail.com, New York University
#
################################################################################

include_directories(include)
include_directories(${LIBEBLEARN_INCLUDE_DIR})
include_directories(${LIBEBLEARNTOOLS_INCLUDE_DIR})
include_directories(${LIBIDX_INCLUDE_DIR})
IF (QT_FOUND)
  include_directories(${LIBIDXGUI_INCLUDE_DIR})
  include_directories(${LIBEBLEARNGUI_INCLUDE_DIR})
ENDIF (QT_FOUND)

# copy scripts to bin
################################################################################
SET(FILE_TO_BIN 
  face/face_meta.conf 
  face/face_dsprepare.sh 
  face/face_mitcbcl_meta.conf 
  face/face_mitcbcl_dsprepare.sh 
  face/face_train.sh
  text/text_meta.conf
  text/text_train.sh
  text/text_dsprepare.sh	
  hand/hand_meta.conf
  hand/hand_train.sh
  hand/hand_dsprepare.sh
  pedestrians/ped_meta.conf
  pedestrians/ped_train.sh
  pedestrians/ped_dsprepare.sh
)

FOREACH(NAME ${FILE_TO_BIN})
  EXEC_PROGRAM("cp" ARGS "\"${CMAKE_CURRENT_SOURCE_DIR}/${NAME}\""
		  "\"${LIBRARY_OUTPUT_PATH}\"" OUTPUT_VARIABLE OUT)
  MESSAGE(STATUS "Copied demos/obj/${NAME} to bin directory.")
ENDFOREACH(NAME)

# compile executable: objtrain
################################################################################
add_executable (objtrain
  src/train.cpp
  )
  
# link executable with external libraries
################################################################################
target_link_libraries (objtrain eblearn idx eblearntools)
IF (QT_FOUND) #---------------------------------------------------------------
  target_link_libraries (objtrain idxgui)
  target_link_libraries (objtrain eblearngui)
ENDIF (QT_FOUND) #------------------------------------------------------------
		
# compile executable: objdetect
################################################################################
add_executable (objdetect
  src/detect.cpp
  )
  
# link executable with external libraries
################################################################################
target_link_libraries (objdetect eblearn idx eblearntools)
IF (QT_FOUND) #---------------------------------------------------------------
  target_link_libraries (objdetect idxgui)
  target_link_libraries (objdetect eblearngui)
ENDIF (QT_FOUND) #------------------------------------------------------------
LINK_BOOST(objdetect)

# compile executable: objdetect
################################################################################
add_executable (objtrack
  src/track.cpp
  )
  
# link executable with external libraries
################################################################################
target_link_libraries (objtrack eblearn idx eblearntools)
IF (QT_FOUND) #---------------------------------------------------------------
  target_link_libraries (objtrack idxgui)
  target_link_libraries (objtrack eblearngui)
ENDIF (QT_FOUND) #------------------------------------------------------------
LINK_BOOST(objtrack)
